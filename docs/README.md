# Newsgame 文档

## 系统概览
- **入口与页面骨架**：`index.html` 提供主容器、流程图侧栏、进度/重开按钮。
- **样式**：`css/style.css` 统一色板、卡片布局、流程图节点、助手浮层、结局回顾等。
- **逻辑模块**：
  - `js/main.js`：初始化路由、绑定重开/快捷键。
  - `js/router.js`：状态机，负责跳转、历史管理、选择处理与决策日志记录。
  - `js/state.js`：存储当前场景、变量、历史、决策日志与助手语句池。
  - `js/ui.js`：渲染场景、选项、流程图；维护助手浮层；生成结局回顾摘要。
  - `js/scenes.js`：剧情与分支数据，包含各场景内容与选项影响。
  - `js/i18n.js`：语言状态、通用 UI 文案、`localize()` 辅助，支持全局中英切换并同步页面文案。

## 助手浮层
- 右下角派蒙助手常驻，每到新场景刷新一句提示文案。
- 语料来源于 `data/assistantLines.js`，中英双语轮播，洗牌后不重复直至用完。
- 可选 AI 互动：追问证据与角色采访（需配置 `config/ai.json`）。

## 决策回顾系统
- 每次选择会写入 `gameState.decisions`（场景、选项、效果标签）。
- 结局页面自动生成：
  - 报道倾向概览。
  - 关键决策清单。

## 戏剧线索（加州野火版）
- 核心事件：2025 北加州野火；玩家在 Cal Fire 简报、避难所现场、社媒传闻、前线随行与调查求证之间取舍。
- 结局：`官方口径为主`、`平衡而透明`、`流量至上`、`调查向深`，依据信息来源与求证程度生成不同回顾。

## 数据存储
- `data/textDB.js`：集中存放各场景正文与结局文案，已提供 `zh/en` 双语字段，便于替换主题或做 A/B 版本。
- `data/newsData.js`：实时看板新闻的时间与文案，同样支持中英文。
- `data/assistantLines.js`：派蒙助手轮播语句（中英双语），随机洗牌后不重复直至用完。

## 研发提示
- 无打字机效果（已禁用/未启用）。
- `angle` 字段可用于后续实验里的倾向统计与结局摘要。
