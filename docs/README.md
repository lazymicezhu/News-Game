# Newsgame 文档

## 系统概览
- **入口与页面骨架**：`index.html` 提供主容器、流程图侧栏、证据抽屉、进度/重开按钮。
- **样式**：`css/style.css` 统一色板、卡片布局、流程图节点、证据抽屉、可信度徽章、结局回顾等。
- **逻辑模块**：
  - `js/main.js`：初始化路由、绑定重开/快捷键。
  - `js/router.js`：状态机，负责跳转、历史管理、选择处理与决策日志记录。
  - `js/state.js`：存储当前场景、变量、历史、决策日志、证据标记。
  - `js/ui.js`：渲染场景、选项、流程图；处理证据抽屉交互；生成结局回顾摘要。
  - `js/scenes.js`：剧情与分支数据，包含来源标签、证据卡、可信度提示。

## 可信度 / 证据系统
- **来源标签 (Source Badges)**：场景顶部显示 `[官方通报] / [目击者口述] / [社交媒体帖] / [二手传播]`，颜色区分可信度。悬停可看细节说明。
- **不确定性提示**：未证实内容显示浅黄背景与“尚未证实”提示。
- **证据卡片抽屉**：右侧按钮“证据与来源”控制抽屉，卡片支持“相信 / 存疑 / 已阅”标记，状态在结局汇总。

## 决策回顾系统
- 每次选择会写入 `gameState.decisions`（场景、选项、来源、是否未证实、效果标签）。
- 结局页面自动生成：
  - 报道倾向与可信度预估分。
  - 关键决策清单。
  - 证据标记统计（相信/存疑/已阅）。

## 戏剧线索（加州野火版）
- 核心事件：2025 北加州野火；玩家在 Cal Fire 简报、避难所现场、社媒传闻、前线随行与调查求证之间取舍。
- 结局：`官方口径为主`、`平衡而透明`、`流量至上`、`调查向深`，依据信息来源与求证程度生成不同回顾。

## 数据存储
- `data/textDB.js`：集中存放各场景正文与结局文案，便于替换主题或做 A/B 版本。
- `data/assistantLines.js`：派蒙助手在无证据卡片时轮播的主题语句，随机洗牌后不重复直至用完。

## 研发提示
- 无打字机效果（已禁用/未启用）。
- `trustDelta`、`angle` 字段可在后续实验里调整权重，影响结局摘要中的可信度预估。
